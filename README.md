# maze-movement-lib

Тестовое задание в "ЦРТ"

## Сборка

В системе должны быть установлены

- Cmake версии не ниже **3.10**
  
- GoogleTest 
  
- Boost **1.68.0**

1. Склонировать репозиторий проекта

```bash
git clone <repo_url>
```

2. Перейти в каталог с репозиторием

```bash
cd maze-movement-lib
```

3. Выполнить команду

```bash
cmake -H. -Bbuild
```

а затем

```bash
cmake --build build
```

В каталоге *build* появятся

- *libmaze_movement.so* - библиотека, которая реализует функционал работы с лабиринтом

- *demo* - демо приложение, которое демонстрирует использование основных возможностей библиотеки

- в папке *test* юнит тесты для библиотеки
  
  - *point_test*

  - *maze_movement_test*

## Запуск

### Демо приложение

Программа принимает на вход лабиринт, маршрут и координаты начальной точки. Аргументы программы:

- **--board** путь до файла с лабиринтом. **Обязательный** аргумент

- **--route** маршрут строка вида *"ulrlrldduu"* где

  - *u* - вверх

  - *d* - вниз
    
  - *r* - направо
  
  - *l* - налево

**Обязательный** аргумент
    
- **--start_x** или **-x** абсцисса начальной точки. По умолчанию значение **0**
    
- **--start_y** или **-y** ордината начальной точки. По умолчанию значение **0**
    
- **--log** включает логгирование движения в консоль. По умолчанию значение **false**

Пример файла с лабиринтом *board.txt*

    (0, 0), (1, 0), (0, 1), (1, 1), (2, 0), (2, 1)

Пример запуска программы

```bash
build/demo --board board.txt --route rrull -x 0 -y 0 --log true
```

Вывод программы

    start (0,0)
    route RIGHT RIGHT UP LEFT LEFT 
    step 1 Navigating from (0,0) RIGHT -> (1,0)
    step 2 Navigating from (1,0) RIGHT -> (2,0)
    step 3 Navigating from (2,0) UP -> (2,1)
    step 4 Navigating from (2,1) LEFT -> (1,1)
    step 5 Navigating from (1,1) LEFT -> (0,1)
    result (0,1)

### Тесты

Юнит тесты могут быть запущены двумя способами

- Запуск отдельно исполняемых файлов с *GoogleTest*

```bash
build/test/point_test
```

```bash
build/test/maze_movement_test
```

- Запуск всех тестов сразу через *Ctest*

```bash
cd build
ctest
```

### Использование библиотеки

Для работы с лабиринтом следует использовать класс *IntegerMaze2D*. Лабиринт может быть создан тремя способами

- Пустым если используется конструктор без аргументов. После можно добавить точки в лабиринт используя метод *add_point*

- Из файла. Конструктор принимает строку, которая содержит путь до файла. В файле должны содержаться точки лабиринта в виде (x, y), где x - абсцисса, а y - ордината, разделённые через запятую. Если файл не удалось открыть или содержимое файла неккоректно, то ошибки не происходит, а лабиринт создаётся пустым.

- Из списка точек. В конструктор следует передать *std::list<IntegerPoint2D>*

Для навигации существует метод *navigate*. Метод принимает на вход начальную точку, направление движения и опционально параметр логгирования (по умолчанию логгирование отключено). В результате возвращается конечная точка в результате движения. Метод имеет двет перегрузки

- вторым параметром может быть *IntegerMaze2D::MOVEMENT* тогда происходит один шаг в данном напрвлении

- если необходимо сделать последовательно несколько шагов то вторым параметром следует передать *std::list<IntegerMaze2D::MOVEMENT>*

Если по ходу движения возникает ситуация, когда переход в данном направлении невозможен (если данная точка не имеет соседней в лабиринте по ходу движения), то ошибки не происходит, а координаты текущей точки остаются прежними.